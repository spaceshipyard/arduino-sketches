// SoftwareSerial - Version: Latest 
#include <SoftwareSerial.h>

#define PIN_READ_1 2 

#define rxPin1 4
#define txPin1 5

#define PULSES_PER_ROTATION 946

volatile unsigned int pulses1;
volatile unsigned int pulses2;
float rpm;
unsigned long timeOld;

SoftwareSerial port1(rxPin1, txPin1);

void counter1()
{
 pulses1++;
}
 
void setup()
{
  Serial.begin(9600);
  while (!Serial) {
  }
  
 pinMode(LED_BUILTIN, OUTPUT);
   
 pinMode(rxPin1, INPUT);
 pinMode(txPin1, OUTPUT);
 
 port1.begin(9600);
  
 pinMode(PIN_READ_1, INPUT);
 pulses1 = 0;
 timeOld = 0;
 attachInterrupt(digitalPinToInterrupt(PIN_READ_1), counter1, FALLING);
}
 
void loop()
{
 digitalWrite(LED_BUILTIN, HIGH);   
 if (millis() - timeOld >= 1000)
 {
 digitalWrite(LED_BUILTIN, LOW);    
 
 detachInterrupt(digitalPinToInterrupt(PIN_READ_1));
 rpm = pulses1 * 1000 / PULSES_PER_ROTATION;
 Serial.println(rpm);
 port1.println(rpm);
 timeOld = millis();
 pulses1 = 0;
 attachInterrupt(digitalPinToInterrupt(PIN_READ_1), counter1, FALLING);
 }
}
